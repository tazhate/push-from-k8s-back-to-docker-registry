{{- if not .Values.registry.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials
  namespace: {{ .Values.daemonset.namespace }}
  labels:
    app: push-missed-images
type: Opaque
stringData:
  username: {{ .Values.registry.username | required "registry.username is required when existingSecret is not set" }}
  password: {{ .Values.registry.password | required "registry.password is required when existingSecret is not set" }}
{{- end }}
